function header(){let t=$(".header"),a=(t.removeClass("_header-hidden"),$(window).scrollTop());$(".header__burger").click(function(){$("body").toggleClass("_open-header-menu")}),5<a?t.addClass("_bg"):t.removeClass("_bg"),$(window).scroll(()=>{var e=$(window).scrollTop();5<e?t.addClass("_bg"):t.removeClass("_bg"),e>a?t.addClass("_header-hidden"):t.removeClass("_header-hidden"),e<=10&&t.removeClass("_header-hidden"),a=e})}$(function(){$(".showplaces__grid ").length&&($grid=$(".showplaces__grid ").masonry({itemSelector:".showplaces__item",columnWidth:".showplaces__size",percentPosition:!0})).imagesLoaded().progress(function(){$grid.masonry("layout")})}),$(function(){if($("#afisha-grid").length){function i(){console.log("state",state),$("#afisha-grid").html("");var e=new URL(location.href);e.searchParams.set("city",state.city),e.searchParams.set("category",state.category),e.searchParams.set("date",state.date),e.searchParams.set("page",state.page),window.history.pushState({},"",e.search),console.log(e.toString()),$.ajax({url:$("#afisha-grid").data("json"),data:{city:state.city,category:state.category,date:state.date,page:state.page},method:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},context:document.body,success:function(t){console.log(t);var e=t.items;$.each(e,function(e,t){var a=$("#template .news-preview").clone();a.find(".news-preview__img picture").html(`<img src=${t.img} alt=${t.title}/>`),a.find(".news-preview__tags").text(t.city),a.find(".news-preview__date").text(t.date),a.find(".news-preview__time").text(t.time),a.find(".news-preview__title").text(t.title),a.find(".news-preview__link").text(t.link),$("#afisha-grid").append(a)}),$(".afisha-main .paginator__page").remove();for(let e=1;e<=t.pages.length;e++)$(".afisha-main .paginator__next").before(`<div class="paginator__page ${t.pages.now==e?"_active":""}">${e}</div>`);0==e.length&&$("#afisha-grid").html($("#template .news-none ").clone())},error:function(){}})}console.log(state),$(".afisha-main__filter-head").click(function(){var e=$(this).closest(".afisha-main__filter");e.hasClass("_open")?(e.removeClass("_open"),e.find(".afisha-main__filter-body").slideUp()):(e.addClass("_open"),e.find(".afisha-main__filter-body").slideDown())}),$(".afisha-main .paginator__page").remove();for(let e=1;e<=state.pages;e++)$(".afisha-main .paginator__next").before(`<div class="paginator__page ${state.page==e?"_active":""}">${e}</div>`);$(document).on("click",".afisha-main .paginator__page ",function(){state.page=$(this).text(),i()}),$(document).on("click",".afisha-main .paginator__prev ",function(){state.page=1<state.page?state.page-1:state.page}),$(document).on("click",".afisha-main .paginator__next ",function(){state.page,state.pages,state.page,i()});let e,t,a=("object"==typeof state.date&&(e=`${state.date[0].split(".")[2]}-${state.date[0].split(".")[1]}-`+state.date[0].split(".")[0],t=`${state.date[1].split(".")[2]}-${state.date[1].split(".")[1]}-`+state.date[1].split(".")[0],console.log(e,t)),new AirDatepicker("#date-calendar",{inline:!0,range:!0,selectedDates:[e,t],onSelect({formattedDate:e}){console.log(e),i(),$(".calendar__from").text(e[0]),$(".calendar__to").text(e[1])}}),$("#afisha-filter-submit ").click(function(){$(window).width()<=1024&&(i(),$(".filters-popup").fadeOut())}),$(document).on("change",".afisha-main__filters input",function(){state.city=$(".afisha-main__filters  [name='city']:checked").val(),state.date=$(".afisha-main__filters  [name='date']:checked").val(),state.category=$(".afisha-main__filters  [name='category']:checked").val(),state.page=$(".afisha-main .paginator__page._active").text(),1024<$(window).width()&&i()}),600);$(".afisha-main .news-preview").each(function(){let e=$(this);setTimeout(function(){e.removeClass("_opacity")},a),a+=300,console.log(a)})}($(window).width()<1024?$("#afisha-filter-popup-wrap"):$("#afisha-main__filters-wrap")).append($("#afisha-main__filters")),$(window).resize(function(){($(window).width()<1024?$("#afisha-filter-popup-wrap"):$("#afisha-main__filters-wrap")).append($("#afisha-main__filters"))}),$(`.afisha-main  [name='city'][value='${state.city}']`).prop("checked",!0),setTimeout(function(){$(`.afisha-main  [name='city'][value='${state.city}']`).prop("checked",!0)},100),$(`.afisha-main  [name='date'][value='${state.date}']`).prop("checked",!0),$(`.afisha-main  [name='category'][value='${state.category}']`).prop("checked",!0)}),$(function(){}),$(function(){}),$(function(){$("#contact-map").length&&ymaps.ready(function(){var e=$("#contact-map").data("coord").split(","),t=(console.log(e),new ymaps.Map("contact-map",{center:[parseFloat(e[0].trim()),parseFloat(e[1].trim())],controls:["zoomControl"],zoom:16},{searchControlProvider:"yandex#search"}));t.behaviors.disable("scrollZoom"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&t.behaviors.disable("drag"),myPlacemark=new ymaps.Placemark([parseFloat(e[0].trim()),parseFloat(e[1].trim())],{hintContent:"",balloonContent:""},{iconLayout:"default#image",iconImageHref:$("#contact-map").data("marker"),iconImageSize:[33,33],iconImageOffset:[-16,-16]}),t.geoObjects.add(myPlacemark)})}),$(function(){if($("body").addClass("_load"),$(".front-top-down").click(function(){$("html, body").animate({scrollTop:$(".front-top-down").position().top-60},600)}),$(".front-news__scroll").length&&($(".front-news__right-btn-down").click(function(){$(".front-news__scroll")}),$(".front-news__right-btn-down").click(function(){$(".front-news__scroll").animate({scrollTop:$(".front-news__scroll").scrollTop()+200},600)}),$(".front-news__scroll").scroll(function(){console.log($(this).scrollTop()),$(".front-news__right-grid").outerHeight()-100<=$(".front-news__scroll").outerHeight()+$(this).scrollTop()?$(".front-news__right-btn-down").fadeOut():$(".front-news__right-btn-down").fadeIn()})),$(".front-top").length){let t=0;function a(){let e=0;$(".front-top__subtitle-slider span").each(function(){e=e<$(this).width()?$(this).width():e,console.log($(this).width(),e)}),$(".front-top__subtitle-slider").css("min-width",e),$(".front-top__title-slider").css("min-width",$(".front-top__title-slider span").first().width())}a(),window.addEventListener("resize",function(e){a()},!0),setInterval(function(){var e=$(".front-top__title-slider  span").length-1;$(".front-top__title-slider  span").removeClass("_prev"),$(".front-top__title-slider  span._active").addClass("_prev"),$(".front-top__title-slider  span").removeClass("_active"),$(".front-top__subtitle-slider  span").removeClass("_prev"),$(".front-top__subtitle-slider  span._active").addClass("_prev"),$(".front-top__subtitle-slider  span").removeClass("_active"),t=t==e?0:t+1,$(".front-top__title-slider  span").eq(t).addClass("_active"),$(".front-top__subtitle-slider  span").eq(t).addClass("_active")},2e3)}if($(".full-slider").length){let i=$(".full-slider__autoplay-circle");new Swiper(".full-slider",{slidesPerView:1,loop:!0,spaceBetween:0,speed:900,autoplay:{delay:5e3,disableOnInteraction:!1},grabCursor:!0,effect:"creative",creativeEffect:{prev:{translate:["-20%",0,-1]},next:{translate:["100%",0,0]}},navigation:{nextEl:$(".full-slider__next")[0],prevEl:$(".full-slider__prev")[0]},on:{autoplayTimeLeft:function(e,t,a){i.css("stroke-dasharray",70*(1-a)+"px, 70px")},slideChange:function(e){e=e.realIndex;$(".full-slider__title._word-animate").removeClass("_word-animate").addClass("_word-hidden"),$(".full-slider__title").eq(e).addClass("_word-animate").removeClass("_word-hidden")}}})}if($(".about-grid__slider").length){let i=$(".about-grid__slider-autoplay-circle");new Swiper(".about-grid__slider",{slidesPerView:1,loop:!0,spaceBetween:0,speed:900,autoplay:{delay:5e3,disableOnInteraction:!1},creativeEffect:{prev:{translate:["-20%",0,-1]},next:{translate:["100%",0,0]}},grabCursor:!0,navigation:{nextEl:$(".about-grid__slider-next")[0],prevEl:$(".about-grid__slider-prev")[0]},on:{autoplayTimeLeft:function(e,t,a){i.css("stroke-dasharray",70*(1-a)+"px, 70px")}}})}if($(".items-slider__slider ").length&&(new Swiper(".items-slider__slider",{slidesPerView:"auto",spaceBetween:20,freeMode:!0,navigation:{nextEl:$(".items-slider__next")[0],prevEl:$(".items-slider__prev")[0]},mousewheel:{forceToAxis:!0,invert:!1}}),$(".items-slider__prev-zona").each(function(){var e=$(this);let i=e.find(".items-slider__prev");e.on("mousemove",function(e){console.log("move");var t=$(this).offset(),a=e.pageX-t.left-38,e=e.pageY-t.top-38;gsap.to(i,.03,{left:a,top:e,ease:Power4.easOut})})}),$(".items-slider__next-zona").each(function(){var e=$(this);let i=e.find(".items-slider__next");e.on("mousemove",function(e){console.log("move");var t=$(this).offset(),a=e.pageX-t.left-38,e=e.pageY-t.top-38;gsap.to(i,.03,{left:a,top:e,ease:Power4.easOut})})})),$(".front-persons__swiper").length&&new Swiper(".front-persons__swiper",{slidesPerView:"auto",spaceBetween:16,freeMode:!0,mousewheel:{forceToAxis:!0,invert:!1},navigation:{nextEl:$(".front-persons__next")[0],prevEl:$(".front-persons__prev")[0]},breakpoints:{1400:{slidesPerView:4},1700:{slidesPerView:5}}}),$(".plan-slider").length&&(new Swiper(".plan-slider",{slidesPerView:1,spaceBetween:16,mousewheel:{forceToAxis:!0,invert:!1},navigation:{nextEl:$(".plan-slider__next")[0],prevEl:$(".plan-slider__prev")[0]},breakpoints:{700:{slidesPerView:2},1450:{slidesPerView:"auto"}}}),$(".plan-slider__prev-zona").each(function(){var e=$(this);let i=e.find(".plan-slider__prev");e.on("mousemove",function(e){console.log("move");var t=$(this).offset(),a=e.pageX-t.left-38,e=e.pageY-t.top-38;gsap.to(i,.03,{left:a,top:e,ease:Power4.easOut})})}),$(".plan-slider__next-zona").each(function(){var e=$(this);let i=e.find(".plan-slider__next");e.on("mousemove",function(e){console.log("move");var t=$(this).offset(),a=e.pageX-t.left-38,e=e.pageY-t.top-38;gsap.to(i,.03,{left:a,top:e,ease:Power4.easOut})})})),$(".quiz").length){const e=new Swiper(".quiz__swiper",{slidesPerView:1,loop:!0,allowTouchMove:!1,spaceBetween:16});$(document).on("click",".quiz__answer-next",function(){e.slideNext(),$(".quiz__answer").find("input").prop("checked",!1),$(".quiz__answer").removeClass("_result")}),$(document).on("change",".quiz__quest-radio  input",function(){var e=$(this).closest(".quiz__answer");e.attr("data-answer",$(this).data("answer")),e.addClass("_result")})}}),$(function(){}),$(function(){}),$(function(){let t=2e3;$(".galleries-grid__item,.gallery-grid__item").each(function(){let e=$(this);setTimeout(function(){e.addClass("_visible")},t),t+=300,console.log(t)}),$(".gallery-grid").length&&($grid=$(".gallery-grid ").masonry({itemSelector:".gallery-grid__item",columnWidth:".gallery-grid__size",percentPosition:!0,gutter:16})).imagesLoaded().progress(function(){$grid.masonry("layout")}),$(".galleries-grid").length&&($grid=$(".galleries-grid ").masonry({itemSelector:".galleries-grid__item",columnWidth:".galleries-grid__size",percentPosition:!0,gutter:16})).imagesLoaded().progress(function(){$grid.masonry("layout")})}),$(function(){}),$(function(){}),$(function(){}),$(function(){AOS.init({duration:700,easing:"ease",once:!0}),document.addEventListener("aos:in",({detail:e})=>{console.log($(e).find(".words")),$(e).find(".words").addClass("_word-animate"),$(e).find("[data-count]").length&&(console.log(e,$(e).find("[data-count]")),$(e).find("[data-count]").each(function(){let a=$(this),i=a.data("divider"),o=a.data("count");var e=a.data("duration")?a.data("duration"):2e3;a.css("min-width",a.outerWidth()),a.css("max-width",a.outerWidth()),a.animateNumber({number:o,numberStep:function(e,t){e=Math.floor(e),t=$(t.elem);o==e&&a.removeAttr("style"),0==i?t.text(e):t.text(e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))}},{easing:"swing",duration:e})}))})}),$(function(){}),$(function(){}),$(function(){$(".video-hover-play").hover(function(){this.play()},function(){this.pause()}),$(".gallery-block__slider ").length&&$(".gallery-block__slider ").each(function(){let i=$(this).find(".gallery-block__slider-autoplay-circle");var e=$(this);new Swiper(this,{slidesPerView:1,loop:!0,spaceBetween:0,speed:900,autoplay:{delay:5e3},grabCursor:!0,navigation:{nextEl:e.find(".gallery-block__slider-next")[0],prevEl:e.find(".gallery-block__slider-prev")[0]},on:{autoplayTimeLeft:function(e,t,a){i.css("stroke-dasharray",70*(1-a)+"px, 70px")}}})})}),$(function(){header()}),$(function(){}),$(function(){}),$(function(){}),$(function(){$(".popup-slider__swiper").each(function(){new Swiper(this,{speed:400,setWrapperSize:!0,observeParents:!0,observer:!0,spaceBetween:50})}),$(".popup-slider__overlay, .popup-slider__close").click(function(){$(".popup-slider").fadeOut(),$("body").removeClass("_no-scroll")}),$("[data-popupslider]").click(function(){var e=$(this).data("popupslider").split("|")[0],t=$(this).data("popupslider").split("|")[1];$(e).length&&($("body").addClass("_no-scroll"),$(e).fadeIn(),$(e).find(".popup-slider__swiper")[0].swiper.slideTo(t))}),$("[data-popup]").click(function(){var e=$(this).data("popup");$(e).length&&($("body").addClass("_no-scroll"),$(e).fadeIn())}),$(".popup__overlay, .popup__close").click(function(){$(".popup").fadeOut(),$("body").removeClass("_no-scroll")}),$(".filters-popup__overlay, .filters-popup__close").click(function(){$(".filters-popup").fadeOut(),$("body").removeClass("_no-scroll")})}),$(function(){function s(){$(".preloader").addClass("_fadeup"),setTimeout(function(){$(".preloader").fadeOut(),setCookie("load",!0),setTimeout(function(){$("body").removeClass("_preloader-open")},500)},1500)}$("body").addClass("_preloader-open"),$(".preloader").addClass("_load"),setTimeout(function(){$(".preloader").addClass("_circles-animate");let e=0;$(".preloader__circle").each(function(){gsap.to(this,{rotation:0,delay:e,duration:10,ease:"elastic"}),e+=.2}),isCityChange?(setTimeout(function(){$(".header").addClass("_opacity"),$(".preloader").addClass("_content")},1500),setTimeout(function(){$(".preloader").addClass("_city")},3e3),$(".preloader").on("mousewheel",function(e){0<e.originalEvent.wheelDelta/120?console.log("up"):s()}),$(".preloader").on("DOMMouseScroll",function(e){0<e.originalEvent.wheelDelta/120?console.log("up"):s()}),$(".preloader").swipe({preventDefaultEvents:!1,swipe:function(e,t,a,i,o,n){50<=a&&"up"==t&&s()}})):setTimeout(function(){s()},1e3),setTimeout(function(){$(".preloader__circle").css({opacity:1,animation:"none"}),$(document).mousemove(function(e){let t=1/(window.innerWidth/e.pageX)-.5,a=0;$(".preloader__circle").each(function(){gsap.to(this,{rotation:(4+a)*t,duration:4,ease:"elastic"}),a+=1})})},4e3)},500)}),$(function(){$(".overfolow-x").length&&$(".overfolow-x").each(function(){var e=$(this);e.html(`<div class="overfolow-x__scroll"><div><div class="overfolow-x__size">${e.html()}</div></div></div>`),e.append('<div class="overfolow-x__prev"><svg width="22" height="15" viewBox="0 0 22 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.8594 0.999911L20.0191 7.15962M20.0191 7.15962L13.8594 13.3193M20.0191 7.15962L-2.6925e-07 7.15962" stroke="#D0B787" stroke-width="2"/></svg></div>'),e.append('<div class="overfolow-x__next"><svg width="22" height="15" viewBox="0 0 22 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.8594 0.999911L20.0191 7.15962M20.0191 7.15962L13.8594 13.3193M20.0191 7.15962L-2.6925e-07 7.15962" stroke="#D0B787" stroke-width="2"/></svg></div>');let t=e.find(".overfolow-x__size"),a=e.find(".overfolow-x__scroll"),i=e.find(".overfolow-x__prev"),o=e.find(".overfolow-x__next");o.click(function(){a.animate({scrollLeft:a.scrollLeft()+150},"slow")}),i.click(function(){a.animate({scrollLeft:a.scrollLeft()-150},"slow")}),e.find(".overfolow-x__scroll").scroll(function(){50<=a.scrollLeft()?i.addClass("_active"):i.removeClass("_active"),a.scrollLeft()+t.innerWidth()<=a[0].scrollWidth-50?o.addClass("_active"):o.removeClass("_active")}),e.find(".overfolow-x__scroll").trigger("scroll")}),$(".one-img-slider ").length&&$(".one-img-slider ").each(function(){let i=$(this).find(".gallery-block__slider-autoplay-circle");var e=$(this);new Swiper(this,{slidesPerView:1,loop:!0,spaceBetween:0,speed:900,autoplay:{delay:5e3},grabCursor:!0,navigation:{nextEl:e.find(".one-img-slider__next")[0],prevEl:e.find(".one-img-slider__prev")[0]},on:{autoplayTimeLeft:function(e,t,a){i.css("stroke-dasharray",70*(1-a)+"px, 70px")}}})})}),$(function(){$(".words").each(function(){let a=$(this);var e=a.text().split(" ");a.empty(),$.each(e,function(e,t){a.append($("<span>").text(t)),a.append(" ")})})});